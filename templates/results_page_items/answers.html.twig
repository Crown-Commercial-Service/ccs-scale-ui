<div class="govuk-body journey-answers">
    <h2 class="govuk-heading-l result-heading">Your answers</h2>
    <div class="govuk-summary-list__row">
        <dl class="govuk-summary-list">
            <dt class="govuk-summary-list__key"> Your initial search term</dt>
            <dd class="govuk-summary-list__value"> {{searchBy}}</dd>
            <dd class="govuk-summary-list__value no-print">
                <span class='hidden_msgs' id="change-search-term"> Change your initial search term {{searchBy}} </span>
                <a  aria-describedby="change-search-term" class="govuk-breadcrumbs__link" href="/agreements/search?q={{ searchByEncoded }}">Change</a></dd>
        </dl>
    </div>

    {% set index = 0 %}
    {% for answer in historyAnswered %}
        <div class="govuk-summary-list__row">
            <dl class="govuk-summary-list">
                <dt class="govuk-summary-list__key"> {{answer.question}}</dt>
                <dd class="govuk-summary-list__value"> {{answer.answerTxt|raw}}</dd>
                <dd class="govuk-summary-list__value no-print">
                    {% if  index >  0 %}
                        <a  aria-describedby="change-answer-{{index}}"
                        href="{{ 
                            path( 
                                'back-to-previous',
                                {
                                    'journeyId': journeyId,
                                    'journeyInstanceId': journeyInstanceId,
                                    'questionUuid': answer.prevQuestionId,
                                    'journeyHistory': journeyHistory, 
                                    'gPage': index,
                                }
                                )}}?q={{ searchByEncoded }}&changeAnswer=1"
                        >Change</a>

                    {% else %}
                        {% if answer.seletectJourney is defined %}
                            <a aria-describedby="change-answer-journey" href="{{path('guided-match-journeys')}}?q={{searchByEncoded}}">Change</a>
                        {% else %}
                            <a aria-describedby="change-answer-{{index}}" href="{{ path('start-journey', {'journeyUuid': journeyId})}}?q={{searchByEncoded}}&changeAnswer=1">Change</a>
                        {% endif %}
                    {% endif %}
                </dd>
            </dl>
        </div>
        
      

        {% if answer.seletectJourney is not defined %}
          <span class='hidden_msgs' id="change-answer-{{index}}">answer for question: {{answer.question}}</span>
            {% set index = index + 1 %}
        {% else %}
        <span class='hidden_msgs' id="change-answer-journey">answer for question: {{answer.question}}</span>

        {% endif %}
    {% endfor %}
        
    {% if  agreementsNames is defined %}
        <div class="govuk-summary-list__row">
        <dl class="govuk-summary-list">
            <dt class="govuk-summary-list__key">  Agreement(s)/Lot(s) recommendations</dt>         
            <dd class="govuk-summary-list__value">
                {% for agreement in agreementsNames %}
                    {{agreement.name}}({{agreement.number}}){{ agreement.lotsTitle is empty  ? '' : ', ' ~  agreement.lotsTitle }}
                {% endfor %}
            </dd>
            <dd class="govuk-summary-list__value"></dd>
        </dl>
        </div>
    {% endif %}
</div>